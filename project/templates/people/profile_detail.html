{% extends "base.html" %}
{% load static %}
{% load trailtags %}

{% block content %}
    <h2>{{ person }}</h2>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">About {{ person }}</h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-2">
                    {% include "people/avatar.html" %}

                    {% if person == user %}
                        <p><a href="{% url 'profile_edit' %}" class="btn btn-primary">Edit my profile</a></p>
                    {% endif %}
                </div>
                <div class="col-sm-10">
                    {% if person.about %}
                        {{ person.about|safe|linebreaks }}
                    {% else %}
                        No profile information available
                    {% endif %}

                    {% if person.twitter %}
                        <a href="https://twitter.com/{{ person.twitter }}"><img src="{% static 'img/social/twitter-128.png' %}" width="30"/></a>
                    {% endif %}

                    {% if person.facebook %}
                        <a href="https://facebook.com/{{ person.facebook }}"><img src="{% static 'img/social/facebook-128.png' %}" width="30"/></a>
                    {% endif %}

                    {% if person.instagram %}
                        <a href="https://instagram.com/{{ person.instagram }}"><img src="{% static 'img/social/instagram-128.png' %}" width="30"/></a>
                    {% endif %}

                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <div class="list-group">
                {% for trail in trails  %}
                    <span class="list-group-item">
                        <h4 class="list-group-item-heading"><a href="">{{ trail.title }} ({{ trail.region }})</a></h4>
                        <p class="list-group-item-text">Distance: {% meters_to_distance trail.distance user.distance_pref "long" %}</p>
                        <p class="list-group-item-text">Ascent: {% meters_to_distance trail.ascent user.distance_pref "short" %}</p>
                        {% if trail.calories %}
                            <p class="list-group-item-text">Calories: {{ trail.calories }}</p>
                        {% endif %}
                        <p class="list-group-item-text">Duration: {{ trail.duration }}</p>
                        <p class="list-group-item-text">Type: {{ trail.get_trail_type_display }}</p>
                        {% if person == user or user.is_superuser %}
                            <p class="list-group-item-text">Public: {{ trail.public }}</p>
                        {% endif %}
                    </span>
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock content %}
